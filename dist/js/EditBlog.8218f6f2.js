import{s as v,a as E}from"./blog.0c4b45c6.js";import{d as B,r as h,a as C,o as F,c as H,b as l,w as c,u as V,e as N,f as p,g as b,h as A,i as x,t as D,E as k,_ as S}from"./index.827fa172.js";function $(g,f,n=!1){let s=null;const t=n;return function(){const _=this,m=arguments;s&&clearTimeout(s),n&&(g.apply(_,m),n=!1),s=setTimeout(()=>{g.apply(_,m),t&&(n=!0)},f)}}const I={class:"edit-blog"},R=B({__name:"EditBlog",setup(g){const f=b(),n=N(),s=h(),t=C({textHeight:"0px",tag:"",tagNm:"",payload:{id:void 0,title:"",context:"",picture:"",contextHtml:"",tagIds:null}});F(()=>{var a;const u=(a=s.value)==null?void 0:a.$el.clientHeight;t.textHeight=`calc( 100vh - 40px - 20px - ${u}px)`;const e=n.query.id;e&&v(e).then(o=>{var d,r;o&&(t.tag=((d=o[0].tags[0])==null?void 0:d.id)+"",t.tagNm=(r=o[0].tags[0])==null?void 0:r.name,t.payload.context=o[0].context,t.payload.contextHtml=o[0].contextHtml,t.payload.title=o[0].title,t.payload.id=o[0].id)})});function _(u){console.log(u)}const m=$(async(u,e)=>{t.payload.tagIds=t.tag,t.payload.contextHtml=e;const a=await E(t.payload);a!=null&&a.id&&(k.success("\u4FDD\u5B58\u6210\u529F"),f.push(`/blog/context/${a.id}`))},500);return(u,e)=>{const a=p("el-input"),o=p("el-form-item"),d=p("el-tag"),r=p("el-form"),y=p("v-md-editor");return A(),H("div",I,[l(r,{ref_key:"formRef",ref:s},{default:c(()=>[l(o,{label:"\u6807\u9898"},{default:c(()=>[l(a,{modelValue:t.payload.title,"onUpdate:modelValue":e[0]||(e[0]=i=>t.payload.title=i)},null,8,["modelValue"])]),_:1}),l(o,{label:"\u6807\u7B7E"},{default:c(()=>[x(D(t.tagNm)+" ",1),l(d,{onClick:e[1]||(e[1]=i=>{t.tag="5",t.tagNm="\u9762\u8BD5"})},{default:c(()=>[x(" \u9762\u8BD5 ")]),_:1}),l(d,{onClick:e[2]||(e[2]=i=>{t.tag="4",t.tagNm="\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F"})},{default:c(()=>[x(" \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F ")]),_:1})]),_:1})]),_:1},512),l(y,{modelValue:t.payload.context,"onUpdate:modelValue":e[3]||(e[3]=i=>t.payload.context=i),height:t.textHeight,onCopyCodeSuccess:_,onSave:V(m)},null,8,["modelValue","height","onSave"])])}}});const U=S(R,[["__scopeId","data-v-98306927"]]);export{U as default};
//# sourceMappingURL=EditBlog.8218f6f2.js.map
